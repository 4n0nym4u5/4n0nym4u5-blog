---
import { SITE_METADATA } from "@/consts";
import GoogleAnalytics from "./analytics/GoogleAnalytics.astro";
import Fathom from "./analytics/Fathom.astro";
import MinimalAnalytics from "./analytics/MinimalAnalytics.astro";
import SimpleAnalytics from "./analytics/SimpleAnalytics.astro";
import Matomo from "./analytics/Matomo.astro";
import Plausible from "./analytics/Plausible.astro";
// import Amplitude from "./analytics/Amplitude.astro"; // Not yet implemented
import Metrical from "./analytics/Metrical.astro";
import Umami from "./analytics/Umami.astro";

const {
  analytics: {
    googleAnalyticsId,
    fantom,
    minimalAnalyticsId,
    simpleAnalytics,
    matomo,
    plausible,
    umami,
    // amplitudeApiKey,
    metricalApp,
  },
} = SITE_METADATA;

const isProduction = import.meta.env.PROD;
---

{isProduction && googleAnalyticsId && <GoogleAnalytics id={googleAnalyticsId} />}
{isProduction && fantom.site && <Fathom {...fantom} />}
{isProduction && minimalAnalyticsId && <MinimalAnalytics id={minimalAnalyticsId} />}
{isProduction && simpleAnalytics && <SimpleAnalytics />}
{isProduction && matomo.id && matomo.url && <Matomo {...matomo} />}
{isProduction && plausible.domain && <Plausible {...plausible} />}
{isProduction && umami.site && umami.dataId && <Umami {...umami} />}
{isProduction && metricalApp && <Metrical app={metricalApp} />}
